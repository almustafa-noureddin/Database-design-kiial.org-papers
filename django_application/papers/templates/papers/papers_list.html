
{% extends 'papers/layout.html' %}

{% block content %}
<div class="papers-table" dir="rtl">
    <table>
        <tr class="heading" >
            <td class="title" >العنوان</td>
            <td class="researcher"> الباحث</td>
            <td class="supervisor"> المشرف</td>
            <td class="degree">الدرجة العلمية</td>
            <td class="date">تاريخ النشر</td>
            <td class="number">رقم الورقة</td>
            <td class="links">#</td>
        </tr>
{% for paper in papers %}

				<tr class="details">
					<td class="title"><a href="{% url 'papers:paper_detail' paper.pk %}">{{paper.title}}</a></td>
					<td class="researcher">{{paper.researcher}}</td>
                    <td class="supervisor">
                    {% for papersupervisor in paper.supervisor.all %}
                    
					{{papersupervisor}} <br>
                    
                    {% endfor %}
                    </td>
					<td class="degree">{{paper.degree}}</td>
					<td class="date_of_publishing">{{paper.date_of_publishing}}</td>
					<td class="number">{{paper.paper_number}}</td>
					<td class="links">
                        <a href="{% url 'papers:update_paper' paper.pk %}" >تعديل الورقة</a>
                        <a href="{% url 'papers:update_researcher' paper.researcher.pk %}" >تعديل الباحث</a>
                        {% for papersupervisor in paper.supervisor.all %}
                            <a href="{% url 'papers:update_supervisor' papersupervisor.pk %}" >تعديل المشرف</a>
                        {% endfor %}
                    </td>
				</tr>
            {% endfor %}

{% if is_paginated %}
<div class="paper-navegation">
<form method="GET">
    <select name="paginate_by" class="btn btn-primary">
    
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="50">50</option>
        
    </select>
    <input type="submit" value="إختر عدد الأوراق لكل صفحة" class="btn btn-primary">
</form>
<br>
<br>
    {% firstof request.GET.paginate_by "5" as paginate_by %}
    {% if page_obj.has_previous %}
        <a class="btn btn-outline-info mb-4" href="?page=1&paginate_by={{ paginate_by }}">الأولى</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">السابقة</a>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
            <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{num}}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
            <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{num}}</a>
        {% endif %}
    {% endfor %}
    {%if page_obj.has_next %}
        <a class="btn btn-outline-info mb-4" href="?page={{page_obj.next_page_number}}&paginate_by={{ paginate_by }}">التالية</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}&paginate_by={{ paginate_by }}">الأخيرة</a>
    {% endif %}
</div>
{% endif %}

                
            </div>
        </table>
    
        
        
        
        
{% endblock %}